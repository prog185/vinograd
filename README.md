## Концепция работы с двумя конфигурациями
### Предварительные ласки
1. Из **Бухгалтерии предприятия** в **Розницу** производится первоначальная выгрузка необходимой нормативно-справочной информации: справочников номенклатуры, контрагентов, организаций, складов и т.д.
1. Перенос "входящих остатков": в **Бухгалтерии предприятия** создается документ **Поступление товаров и услуг**, содержащий весь товар, имеющийся в наличии на складе. Далее данный документ переносится в **Розницу**. Это необходимо для того, чтобы оприходовать в **Рознице** товар, уже имеющийся на складе, чтобы программа в дальнейшем дала его продать. После оприходования товара в **Рознице** данный документ в **Бухгалтерии предприятия** можно удалить (пометить на удаление).
### Регулярный обмен
1. При создании в **Бухгалтерии предприятия** документов **Поступление товаров и услуг** они будут переноситься в **Розницу**.  
1. При создании в **Рознице** документов **Реализация товаров** они будут переноситься в **Бухгалтерию предприятия**.
1. Как правило, обмен документами производится ежедневно, в конце рабочего дня (или после того, как созданы все документы за текущий день). 
1. В случае необходимости, любой документ можно перенести в другую базу в любое время непосредственно после его создания.
1. Если появится необходимость добавить в **Рознице** новую номенклатурную позицию, нового контрагента, склад и т.п., то сначала надо это сделать в **Бухгалтерии**. После того, как элемент будет заведен в бухгалтерской базе, его можно нужно перенести в розницу так же, как осуществлялся первоначальный перенос.

## Общая информация по обмену данными

1. Правила обмена данными создавались в конфигурации **Конвертация данных 2.1.8.2**. Обмен данными между конфигурациями **Бухгалтерия предприятия** и **Розница** является актуальным для следующих версий/релизов:
   
    1. **Бухгалтерия предприятия** - 2.0.66.63
    1. **Розница** - 2.2.0.19
1. Обмен данными будет производиться путем выгрузки необходимых объектов (справочников, документов и т.д.) в файл \*.xml из конфигурации-источника и загрузки этого файла в конфигурацию-приемник.
1. Выгрузка и загрузка данных производится с помощью обработки **Универсальный обмен данными в формате XML**. Для этого:

    1. В **Бухгалтерии предприятия** нужно открыть внешний файл **V8Exchan82.epf**
    1. В **Рознице** - открыть встроенную обработку **Универсальный обмен данными в формате XML**
1. Для того, чтобы выгрузить нужные данные, в обработке **Универсальный обмен данными...** необходимо указать правильный **файл с правилами обмена**!
1. При обновлении какой-либо конфигурации существет риск, что обновление затронет один из переносимых объектов! Поэтому после обновления программ необходимо проверить корректность работы обмена и при необходимости внести правки в файлы с правилами обмена.

## Перенос данных из Бухгалтерию в Розницу
### Первоначальный перенос
1. Скачать файл обработки обмена данными **V8Exchan82.epf** и файл с правилами обмена **ПравилаОбменаДанными_Справочники.xml**
1. Открыть файл **V8Exchan82.epf** в **Бухгалтерии предприятия** (через пункты меню "Файл"->"Открыть").
1. В открывшейся обработке заполнить следующие поля:
   
    1. **Имя файла правил** - скачанный файл **ПравилаОбменаДанными_Справочники.xml**. На вопрос "Загрузить правила обмена данными?" ответить положительно. После этого бдет заполнена табличная часть, содержащая правила выгрузки данных.
    1. Проставить переключатель в значение **Выгрузка в файл обмена**.
    1. **Имя файла данных** - скачанный файл **ПравилаОбменаДанными_Справочники.xml**:  
![](https://github.com/prog185/vinograd/blob/other/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD_01.png)
1. После заполнения необходимых полей нажать на кнопку "Выгрузить данные". Будет произведена выгрузка данных в файл, указанный в поле "Имя файла данных". По окончанию выгрузки система оповестит об этом в служебном сообщении:

![](https://github.com/prog185/vinograd/blob/other/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD_02.png)
### Регулярный перенос

## Перенос данных из Розницы в Бухгалтерию
